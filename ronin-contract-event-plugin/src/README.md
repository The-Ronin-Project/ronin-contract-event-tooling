# ronin-contract-event-plugin

This plugin provides validation and documentation generation for event contracts.

To use this plugin, include the following in your plugins section of the Gradle build file:

```kotlin
plugins {
    id("com.projectronin.event.contract") version "..."
}
```

## Expected Setup

This plugin makes several assumptions about the format of the consuming project. The project is expected to have 1+
version
folder containing JSON Schema files. The version folders should be of the form `vX` where the X is any number. The JSON
Schema
files are expected to be named as `SCHEMANAME-vX.schema.json` where the `vX` matches the folder name and
the `SCHEMANAME`
is any meaningful name for the project.

    .
    ├── v1
    │   └── my-schema-v1.schema.json
    ├── v2
    │   ├── my-other-schema-v2.schema.json
    │   └── my-schema-v2.schema.json
    └── build.gradle.kts

## Tasks

### testEvents

The `testEvents` task will validate the project's schemas and test them against any provided example files.

Within each version folder, the number of schema files determines how examples are tested. If a single schema file is
defined, then all examples present will be run against that schema. If there are multiple schema files present, each
schema file will be tested against the examples starting with the `SCHEMANAME`.

    .
    ├── v1
    │   ├── examples
    │   │   ├── example1.json
    │   │   └── example2.json
    │   └── my-schema-v1.schema.json
    ├── v2
    │   ├── examples
    │   │   ├── my-other-schema-example1.json
    │   │   ├── my-other-schema-example2.json
    │   │   └── my-schema-example.json
    │   ├── my-other-schema-v2.schema.json
    │   └── my-schema-v2.schema.json
    └── build.gradle.kts

For example, using the example above, for `my-schema-v1.schema.json`, both `example1.json` and `example2.json` will be
tested. For `my-schema-v2.schema.json`, only `my-schema-example.json` will be tested,
while `my-other-schema-example1.json`
and `my-other-schema-example2.json` are tested against `my-other-schema-v2.schema.json`.

### generateEventDocs

The `generateEventDocs` task uses the Docker image built by the parent project to generate documentation for all schemas
in a `docs` folder within each version folder.

## cleanEvents

The `cleanEvents` task cleans up any current artifacts generated by this plugin, and the task is configured to run when
`clean` is run,
